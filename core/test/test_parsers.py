import pytest
import griddlers

class TestNONParser:

	def test_example1(self):
		b = griddlers.parsers.NONParser.parse("file:examples/1.non")
		assert len(b.rows()) == 32
		assert len(b.columns()) == 26
		assert b.constraints.rows == [ [2], [4,3], [5,6], [5,7], [4,6], [2,3,5], [2,2,3], [2,1,2], [1,2], [2,3], [1,2,1], [1,2,3,2], [2,2,4,4,1], [2,2,4,4,1], [3,2,4,4,1], [3,3,2,4,2], [3,4,2,2], [3,5,3,3], [3,6,5,4], [4,7,1,7], [24], [13,8], [16,7], [5,8,7], [5,8,6], [5,8,6], [4,7,6], [3,7,5], [7,5], [7,4], [6,2], [5] ]
		assert b.constraints.columns == [ [6], [14], [3,12], [2,9], [2,9], [1,8], [19], [15], [4,11], [5,13], [5,13], [6,3,13], [5,5,13], [3,6,1,12], [4,2,1,10], [4,10], [2,1,1,3], [1,2], [4,12], [1,6,12], [3,6,11], [5,4,11], [6,11], [7,10], [6,1,9], [4,6] ]

	def test_example2(self):
		b = griddlers.parsers.NONParser.parse("file:examples/2.non")
		assert len(b.rows()) == 20
		assert len(b.columns()) == 20
		assert b.constraints.rows == [ [2], [5], [2,4], [5,4], [2,10], [2,8], [3,4,6], [1,1,6,2], [3,3,3], [2,1,2,2], [1,1,1,1,1,2], [3,1,1], [3,1,1,2], [3,1,1], [4,1,1], [7,4], [5,4,3], [4,3], [3,3], [2,3] ]
		assert b.constraints.columns == [ [1], [10], [1,1,7], [13], [2,6], [2,5,5], [2,3,1,1], [2,3,1,3], [4,2,1,1], [2,2,2,1,1], [2,2,3,3], [2,2,4,2,1], [2,2,5,5], [4,5], [5,4], [4], [4], [3], [3], [2] ]


